<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mood Community - AI Mood Player</title>
    <link rel="stylesheet" href="./styles.css" />
    <meta name="description" content="감정과 음악을 공유하는 Mood 커뮤니티" />
  </head>
  <body>
    <canvas id="starfield"></canvas>
    <!-- Top Navigation (back to main) -->
    <header class="navbar">
      <div class="nav-left">
        <div class="logo">🎵</div>
        <div class="brand">
          <div class="title">Mood Community</div>
          <div class="caption">감정과 음악을 공유해요</div>
        </div>
        <nav class="menu">
          <a href="./index.html">메인</a>
          <a href="#feed">피드</a>
          <a href="#share">공유</a>
          <a href="#notifications">알림</a>
          <a href="#theme">설정</a>
        </nav>
      </div>
      <div class="nav-right">
        <button id="profile-btn" class="btn btn-tertiary" style="display:none">프로필</button>
        <button id="app-logout" class="btn" style="display:none">로그아웃</button>
        <button id="auth-open" class="btn btn-primary-glow">로그인/회원가입</button>
      </div>
    </header>

    <div id="app-content">
      <!-- Community Frames -->
      <section class="community container">
        <aside class="community-sidebar" id="community-sidebar">
          <div class="side-brand">
            <div class="side-title">Mood Player</div>
            <div class="side-sub">Community</div>
          </div>
          <nav class="side-nav" id="side-nav">
            <button class="side-item active" data-view="feed">🏠 <span>홈</span></button>
            <button class="side-item" data-view="notifications">🔔 <span>알림</span><span class="badge-count" id="notif-badge" style="display:none"></span></button>
            <button class="side-item" data-view="profile">👤 <span>프로필</span></button>
            <button class="side-item" data-view="theme">⚙ <span>설정</span></button>
          </nav>
          <div class="side-bottom">
            <button id="open-share" class="btn btn-primary-glow side-share-btn">+ 새 무드 공유</button>
          </div>
        </aside>
        <div class="community-main">
          <h2 class="section-title">Mood Community</h2>
          <p class="section-sub">공유된 감정과 음악을 탐색해보세요</p>

          <!-- Feed Frame -->
          <div class="frame frame-feed active" id="frame-feed">
            <div class="feed-filters chip-row" id="feed-filter-chips">
              <button class="chip active" data-filter="all">전체</button>
              <button class="chip" data-filter="mine">내 무드</button>
              <button class="chip" data-filter="follow">팔로잉</button>
              <button class="chip" data-filter="trend">인기</button>
            </div>
            <div class="feed-column" id="feed-grid"></div>
          </div>

          <!-- Share Creator Frame -->
          <div class="frame frame-share" id="frame-share">
            <div class="share-layout">
              <div class="creator-panel card">
                <h3>오늘의 무드 공유</h3>
                <div class="mood-buttons" id="mood-buttons">
                  <button class="mood-btn" data-mood="Chill">Chill</button>
                  <button class="mood-btn" data-mood="Focus">Focus</button>
                  <button class="mood-btn" data-mood="Happy">Happy</button>
                  <button class="mood-btn" data-mood="Sad">Sad</button>
                  <button class="mood-btn" data-mood="Angry">Angry</button>
                </div>
                <textarea id="mood-comment" placeholder="오늘의 기분/상황을 적어보세요" rows="4"></textarea>
                <input type="text" id="current-track" placeholder="현재 듣는 곡 또는 플레이리스트" />
                <button id="share-submit" class="btn btn-primary-glow" disabled>공유하기</button>
              </div>
              <div class="preview-panel card" id="share-preview">
                <h3>공유 카드 미리보기</h3>
                <div class="preview-card-inner">
                  <div class="p-header"><span class="p-avatar">🎧</span><span class="p-nick" id="preview-nick">User</span><span class="p-time" id="preview-time">--:--</span></div>
                  <div class="p-mood" id="preview-mood">#Mood</div>
                  <div class="p-comment" id="preview-comment">코멘트를 입력하세요.</div>
                  <div class="p-track" id="preview-track">트랙 정보 없음</div>
                  <div class="action-bar">
                    <button class="icon-btn act like" data-act="like">♡</button>
                    <button class="icon-btn act comment" data-act="comment">💬</button>
                    <button class="icon-btn act bookmark" data-act="bookmark">🔖</button>
                    <button class="icon-btn act share" data-act="share">⤴</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Theme Settings Frame -->
          <div class="frame frame-theme" id="frame-theme">
            <h3>테마 커스터마이징</h3>
            <div class="theme-grid" id="theme-grid">
              <div class="theme-card" data-theme="darkNeon"><div class="t-preview darkNeon"></div><div class="t-name">Dark + Neon</div></div>
              <div class="theme-card" data-theme="lightPastel"><div class="t-preview lightPastel"></div><div class="t-name">Light + Pastel</div></div>
              <div class="theme-card" data-theme="neonRetro"><div class="t-preview neonRetro"></div><div class="t-name">Neon Retro</div></div>
              <div class="theme-card" data-theme="minimalBlack"><div class="t-preview minimalBlack"></div><div class="t-name">Minimal Black</div></div>
            </div>
            <button id="apply-theme" class="btn btn-primary-glow" disabled>테마 적용</button>
          </div>

          <!-- Notifications Frame -->
          <div class="frame frame-notifications" id="frame-notifications">
            <h3>알림 센터</h3>
            <ul class="notif-list" id="notif-list"></ul>
          </div>
        </div>
      </section>
    </div>

    <!-- Floating Notifications Button -->
    <button id="floating-notif-btn" class="floating-btn" aria-label="알림 보기">🔔</button>
    <script src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>
    <script src="./config.js"></script>
    <script src="./app.js"></script>
  </body>
</html>
