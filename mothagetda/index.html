<!DOCTYPE html>
<html lang="ko">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>AI Mood Player</title>
		<link rel="stylesheet" href="./styles.css" />
		<meta name="description" content="얼굴 표정 감정 분석으로 맞춤 음악을 재생하는 AI Mood Player" />
	</head>
	<body>
		<!-- Top Navigation -->
		<header class="navbar">
			<div class="nav-left">
				<a href="/" class="logo-link">
					<div class="logo">🎵</div>
				</a>
				<div class="brand">
					<div class="title">AI Mood Player</div>
					<div class="caption">당신의 감정을 음악으로</div>
				</div>
				<nav class="menu">
					<a href="#features">기능</a>
					<a href="#how">작동 방식</a>
				</nav>
			</div>
			<div class="nav-right">
				<button id="notifications-btn" class="btn btn-ghost icon-only" title="알림">🔔<span id="notif-badge" class="badge hidden">0</span></button>
				<button id="auth-open" class="btn btn-primary-glow">로그인/회원가입</button>
				<button id="profile-btn" class="btn btn-ghost hidden">👤 프로필</button>
				<button id="logout-btn" class="btn btn-tertiary hidden">로그아웃</button>
			</div>
		</header>

		<!-- Hero -->
		<section class="hero">
			<h1>당신의 감정이 완벽한 플레이리스트를 만듭니다</h1>	
			<p class="hero-sub">AI가 얼굴 표정을 분석하고 지금 이 순간에 딱 맞는 음악을 자동으로 추천해 드립니다.</p>
			<div class="cta-row">
				<button id="cta-upload" class="btn btn-primary-glow">사진 업로드</button>
			</div>
			<div class="features" id="features">
				<div class="feature-card">
					<div class="icon">⚡</div>
					<div class="title">실시간 분석</div>
					<div class="desc">사진 실시간 감정 분석</div>
				</div>
				<div class="feature-card">
					<div class="icon">🎵</div>
					<div class="title">Spotify 연동</div>
					<div class="desc">수백만 곡 중 완벽 매칭</div>
				</div>
				<div class="feature-card">
					<div class="icon">💙</div>
					<div class="title">맞춤형 학습</div>
					<div class="desc">취향을 학습하는 추천</div>
				</div>
			</div>
		</section>

		<!-- Main Panels -->
		<main class="main container">
			<div class="main-grid">
				<!-- Left: Analysis Panel with tabs -->
				<section class="card panel">
					<div class="panel-header">
						<div class="segmented">
							<button id="tab-upload" class="seg active">사진 업로드</button>
						</div>
					</div>

					<!-- Upload Panel -->
					<div class="panel-body panel-upload">
						<div id="dropzone" class="dropzone">
							<div class="drop-icon">⬆</div>
							<div class="drop-title">사진을 여기에 드롭하세요</div>
							<div class="drop-sub">또는 클릭하여 파일을 선택하세요 (JPG, PNG, GIF)</div>
							<input type="file" id="image-input" accept="image/*" hidden />
						</div>
						<div id="preview" class="preview hidden">
							<img id="preview-img" alt="미리보기" />
						</div>
						<div class="row">
							<button id="analyze-btn" class="btn primary">분석하기</button>
							<button id="demo-btn" class="btn">테스트 모드</button>
						</div>
						<div class="tips">
							<div class="tips-title">더 정확한 분석을 위한 팁</div>
							<ul>
								<li>얼굴이 정면으로 잘 보이는 사진을 사용하세요</li>
								<li>밝은 조명에서 촬영하면 더 정확합니다</li>
								<li>안경이나 마스크는 벗는 것이 좋아요</li>
							</ul>
						</div>
						<p id="status" class="status"></p>
					</div>
				</section>

				<!-- Right: Recommendation / Results -->
				<section class="card panel" id="panel-reco">
					<div class="panel-title">음악 추천</div>
					<div class="result-box hidden" id="result-box">
						<div class="result-line"><span class="label">감정:</span> <span id="emotion-text">-</span></div>
						<div class="result-line"><span class="label">무드:</span> <span id="mood-text">-</span></div>
						<div class="result-line"><span class="label">신뢰도:</span> <span id="confidence-text">-</span></div>
					</div>
					<div id="embed" class="embed placeholder">
						<div class="placeholder-inner">
							<div class="big-icon">대기중</div>
							<div class="ph-desc">사진을 업로드하시면 당신의 감정에 맞는 <br>플레이리스트를 추천해드립니다.</div>
						</div>
					</div>
					<div class="row">
						<button id="like-btn" class="btn btn-like">❤️ 좋아요</button>
						<button id="skip" class="btn">다른 추천 보기</button>
						<button id="reset-learning" class="btn btn-tertiary">학습 초기화</button>
					</div>
					<p class="hint">브라우저 정책상 자동 재생이 제한될 수 있습니다. 재생 버튼을 눌러주세요.</p>
				</section>
			</div>
		</main>

		<!-- How it works / Info -->
		<section id="how" class="how container">
			<div class="how-header">간단한 3단계</div>
			<div class="how-grid">
				<div class="how-card">
					<div class="icon">📷</div>
					<div class="title">사진 업로드</div>
					<div class="desc">사진을 업로드하세요</div>
				</div>
				<div class="how-card">
					<div class="icon">🤖</div>
					<div class="title">AI 감정 분석</div>
					<div class="desc">표정을 분석해 현재 상태를 파악합니다</div>
				</div>
				<div class="how-card">
					<div class="icon">🎧</div>
					<div class="title">맞춤 음악 추천</div>
					<div class="desc">무드에 맞는 플레이리스트를 재생합니다</div>
				</div>
			</div>

			<div class="system-grid">
				<div class="sys-card"><div class="icon">💙</div><div class="title">취향 학습</div><div class="desc">좋아요/스킵으로 취향을 학습합니다</div></div>
				<div class="sys-card"><div class="icon">📒</div><div class="title">감정 기록</div><div class="desc">시간대별 감정을 바탕으로 추천 향상</div></div>
				<div class="sys-card"><div class="icon">⚡</div><div class="title">실시간 분석</div><div class="desc">업로드한 사진의 감정을 즉시 반영</div></div>
				<div class="sys-card"><div class="icon">🎵</div><div class="title">Spotify 연동</div><div class="desc">내 기기에서 바로 재생</div></div>
			</div>

			<div class="api-note card">
				<div class="api-title">API 연동 안내</div>
				<ul>
					<li><b>Spotify Web API:</b> 실제 곡 재생 및 선택형 미디어제어</li>
					<li><b>Emotion Detection API:</b> 사진 분석 시 감정 분류(Face++)</li>
					<li><b>face-api.js:</b> 브라우저 on-device 실시간 분석</li>
				</ul>
			</div>
		</section>

		<footer class="footer">
			<p>Built with Spotify Embed & Web API, Face++ API (optional), face-api.js. 이 데모는 교육/개발 용도입니다.</p>
		</footer>

		<!-- Auth Modal: 로그인 / 회원가입 -->
		<div id="auth-modal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="auth-title">
			<div class="auth-card card" role="document">
				<div class="auth-head">
					<div class="auth-brand">
						<div class="logo">🎵</div>
						<div>
							<div id="auth-title" class="auth-title">AI-Music-Mood-Player</div>
							<div class="auth-sub">당신의 감정을 음악으로</div>
						</div>
					</div>
					<button id="auth-close" class="icon-btn" aria-label="닫기">✕</button>
				</div>
				<div class="auth-tabs segmented">
					<button id="auth-tab-login" class="seg active">로그인</button>
					<button id="auth-tab-signup" class="seg">회원가입</button>
				</div>
				<div class="auth-body">
					<!-- Login form -->
					<form id="login-form" class="form" novalidate>
						<label for="login-email">이메일</label>
						<input id="login-email" type="email" placeholder="you@example.com" autocomplete="email" required />
						<label for="login-password">비밀번호</label>
						<input id="login-password" type="password" placeholder="••••••••" autocomplete="current-password" required />
						<div class="row">
							<button id="login-submit" type="submit" class="btn primary" style="flex:1">로그인</button>
						</div>
						<div class="auth-links">
							<button type="button" class="text-link" id="goto-signup">회원가입</button>
							<button type="button" class="text-link" id="forgot-pass">비밀번호 찾기</button>
						</div>
					</form>

					<!-- Signup form -->
					<form id="signup-form" class="form hidden" novalidate>
						<label for="su-name">이름</label>
						<input id="su-name" type="text" placeholder="홍길동" autocomplete="name" required />
						<label for="su-email">이메일</label>
						<input id="su-email" type="email" placeholder="you@example.com" autocomplete="email" required />
						<label for="su-pass">비밀번호</label>
						<input id="su-pass" type="password" placeholder="8자 이상" autocomplete="new-password" required />
						<label for="su-pass2">비밀번호 확인</label>
						<input id="su-pass2" type="password" placeholder="다시 입력" autocomplete="new-password" required />

						<div class="consent card">
							<div class="consent-head">개인정보 및 약관 동의</div>
							<label class="checkbox-row">
								<input id="consent-all" type="checkbox" />
								<span>전체 동의</span>
							</label>
							<hr class="consent-sep" />
							<div class="consent-items">
								<label class="checkbox-row">
									<input id="consent-tos" type="checkbox" data-required="true" />
									<span>[필수] 서비스 이용약관</span>
									<button type="button" class="text-link more" data-doc="tos">자세히 보기 ›</button>
								</label>
								<label class="checkbox-row">
									<input id="consent-privacy" type="checkbox" data-required="true" />
									<span>[필수] 개인정보 수집/이용</span>
									<button type="button" class="text-link more" data-doc="privacy">자세히 보기 ›</button>
								</label>
								<label class="checkbox-row">
									<input id="consent-marketing" type="checkbox" />
									<span>[선택] 마케팅 정보 수신</span>
									<button type="button" class="text-link more" data-doc="marketing">자세히 보기 ›</button>
								</label>
							</div>
						</div>

						<div class="row">
							<button id="signup-submit" type="submit" class="btn primary" disabled style="flex:1">회원가입</button>
						</div>
						<div class="auth-links">
							<button type="button" class="text-link" id="goto-login">이미 계정이 있으신가요? 로그인</button>
						</div>
					</form>
				</div>
			</div>
		</div>

		<!-- Terms Modal (optional detail) -->
		<div id="terms-modal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="terms-title">
			<div class="terms-card card" role="document">
				<div class="auth-head">
					<div>
						<div id="terms-title" class="auth-title">자세히 보기</div>
						<div class="auth-sub">약관/정책 전문</div>
					</div>
					<button id="terms-close" class="icon-btn" aria-label="닫기">✕</button>
				</div>
				<div class="terms-body" id="terms-body">
					<p class="muted">샘플 텍스트입니다. 실제 서비스 적용 시 약관/개인정보 처리방침 전문을 삽입하세요.</p>
				</div>
			</div>
		</div>

		<!-- Profile Modal -->
		<div id="profile-modal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="profile-title">
			<div class="profile-card card" role="document">
				<div class="auth-head">
					<div>
						<div id="profile-title" class="auth-title">내 프로필</div>
						<div class="auth-sub">사용자 정보 및 활동 기록</div>
					</div>
					<button id="profile-close" class="icon-btn" aria-label="닫기">✕</button>
				</div>
				<div class="profile-body">
					<div class="profile-info">
						<div class="profile-avatar">👤</div>
						<div class="profile-details">
							<div class="profile-name" id="profile-name">사용자</div>
							<div class="profile-email" id="profile-email">user@example.com</div>
						</div>
					</div>
					<div class="profile-tabs segmented">
						<button id="profile-tab-played" class="seg active">재생한 곡</button>
						<button id="profile-tab-liked" class="seg">좋아요 누른 곡</button>
					</div>
					<div class="profile-content">
						<div id="profile-played-list" class="profile-list">
							<p class="muted">재생 기록이 없습니다.</p>
						</div>
						<div id="profile-liked-list" class="profile-list hidden">
							<p class="muted">좋아요 누른 곡이 없습니다.</p>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Notifications Dropdown -->
		<div id="notifications-dropdown" class="notif-dropdown hidden">
			<div class="notif-header">
				<span class="notif-title">알림</span>
				<button id="clear-notifs" class="text-link">모두 지우기</button>
			</div>
			<div id="notif-list" class="notif-list">
				<p class="muted" style="padding: 12px; text-align: center;">새 알림이 없습니다.</p>
			</div>
		</div>

		<!-- Toast Container -->
		<div id="toast-container" class="toast-container"></div>

		<script src="./config.js"></script>
		<script src="./app.js"></script>
	</body>
	</html>
